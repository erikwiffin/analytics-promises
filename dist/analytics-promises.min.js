/*!
 * analytics-promises 0.5.0
 * https://github.com/erikwiffin/analytics-promises
 * 
 * @copyright 2014, Erik Wiffin <erik.wiffin@gmail.com>
 * @license analytics-promises may be freely distributed under the MIT license.
 */
!function(a){var b,c;!function(){var a={},d={};b=function(b,c,d){a[b]={deps:c,callback:d}},c=function(b){function e(a){if("."!==a.charAt(0))return a;for(var c=a.split("/"),d=b.split("/").slice(0,-1),e=0,f=c.length;f>e;e++){var g=c[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(d[b])return d[b];if(d[b]={},!a[b])throw new Error("Could not find module "+b);for(var f,g=a[b],h=g.deps,i=g.callback,j=[],k=0,l=h.length;l>k;k++)j.push("exports"===h[k]?f={}:c(e(h[k])));var m=i.apply(this,j);return d[b]=f||m},c.entries=a}(),b("analytics-promises/accounts",["analytics-promises/utils","exports"],function(a,b){"use strict";function c(){var a=new RSVP.Promise(function(a,b){function c(c){c.code?b("There was an error querying accounts: "+c.message):c&&c.items&&c.items.length?a(c.items):b("No accounts found for this user.")}d(gapi.client.analytics.management.accounts.list(),c)});return a}var d=a.execute;b["default"]=c}),b("analytics-promises/auth",["exports"],function(a){"use strict";function b(a){arguments[1]&&arguments[1].clientId&&arguments[1].apiKey&&(c=arguments[1].clientId,d=arguments[1].apiKey);var b=new RSVP.Promise(function(b,f){function g(a){!a||a instanceof Error?f(a):b(a)}gapi.client.setApiKey(d),gapi.auth.authorize({client_id:c,scope:e,immediate:a},g)});return b}var c,d,e="https://www.googleapis.com/auth/analytics.readonly";a["default"]=b}),b("analytics-promises/core",["analytics-promises/utils","exports"],function(a,b){"use strict";function c(a,b){var c=new RSVP.Promise(function(c,e){function f(a){a.code?e("There was an error querying the core reporting api: "+a.message):c(a)}a&&a.id&&(a="ga:"+a.id),b.ids=a,d(gapi.client.analytics.data.ga.get(b),f)});return c}var d=a.execute;b["default"]=c}),b("analytics-promises/profiles",["analytics-promises/utils","exports"],function(a,b){"use strict";function c(a){var b=new RSVP.Promise(function(b,c){function e(a){a.code?c("There was an error querying profiles: "+a.message):a&&a.items&&a.items.length?b(a.items):c("No profiles found for this user.")}var f,g,h;a&&a.accountId&&a.id&&(f=a.accountId,g=a.id),h=gapi.client.analytics.management.profiles.list({accountId:f,webPropertyId:g}),d(h,e)});return b}var d=a.execute;b["default"]=c}),b("analytics-promises/utils",["exports"],function(a){"use strict";function b(a){f=a}function c(a,b){var g=new RSVP.Promise(function(g){var h,i=Math.floor(Date.now()/1e3),j=function(){return function(){b.apply(this,arguments),g()}}(b);i>d&&(d=i,e=0),e++,e>f?(h=1e3-(Date.now()-parseInt(i+"000",10)),setTimeout(function(){c(a,j)},h)):a.execute(j)});return g}var d=0,e=0,f=10;a.setRateLimit=b,a.execute=c}),b("analytics-promises/webProperties",["analytics-promises/utils","exports"],function(a,b){"use strict";function c(a){var b=new RSVP.Promise(function(b,c){function e(a){a.code?c("There was an error querying webProperties: "+a.message):a&&a.items&&a.items.length?b(a.items):c("No webProperties found for this user.")}var f;a&&a.id&&(a=a.id),f=gapi.client.analytics.management.webproperties.list({accountId:a}),d(f,e)});return b}var d=a.execute;b["default"]=c}),b("analytics-promises",["analytics-promises/auth","analytics-promises/accounts","analytics-promises/webProperties","analytics-promises/profiles","analytics-promises/core","analytics-promises/utils","exports"],function(a,b,c,d,e,f,g){"use strict";function h(){var a=new RSVP.Promise(function(a){function b(){a(this)}gapi.client.load("analytics","v3",b)});return a}function i(a){var b=!0;return"undefined"!=typeof arguments[1]&&(b=arguments[1]),a&&a.rateLimit&&s(a.rateLimit),n(b,a).then(function(){return h()})}function j(){return o()}function k(a){return p(a)}function l(a){return q(a)}function m(a,b){return r(a,b)}var n=a["default"],o=b["default"],p=c["default"],q=d["default"],r=e["default"],s=f.setRateLimit;g.init=i,g.accounts=j,g.webProperties=k,g.profiles=l,g.query=m}),a.Analytics=c("analytics-promises")}(window);